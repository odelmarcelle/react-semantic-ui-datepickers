"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("date-fns/isValid"),n=require("format-string-by-pattern"),r=require("react"),s=require("react-fast-compare"),l=require("@date-fns/upgrade/v2/convertTokens"),o=require("date-fns/format"),a=require("date-fns/isBefore"),i=require("date-fns/parse"),d=require("date-fns/startOfDay"),c=require("dayzed"),u=require("date-fns/compareAsc"),h=require("date-fns/isSameDay"),p=require("classnames"),f=require("semantic-ui-react");function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=g(t),v=g(n),y=g(r),b=g(s),D=g(o),x=g(a),C=g(i),k=g(d),w=g(c),O=g(u),j=g(h),R=g(p);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(null,arguments)}function I(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}const P=(e,t,n)=>!(t&&x.default(e,t)||n&&x.default(n,e)),F=(e,t)=>{const n=new Date;return{date:k.default(n),nextMonth:!1,prevMonth:!1,selectable:P(n,e,t),selected:!1,today:!0}},M=(e,t,n)=>e?D.default(k.default(e),l.convertTokens(t),n):void 0,V=(e,t)=>{const n={};return e.forEach((e=>{n[e]=t[e]})),n},q=(e,t,n)=>e?Array.isArray(e)?e.map((e=>M(e,t,n))).join(" - "):M(e,t,n):"",E=e=>e.replace(/[D, Y]/gi,(e=>e.toLowerCase()));function B(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return t.some((t=>(t&&t(e,...r),e.defaultPrevented)))}}function N(e,t){return 2===e.length&&e[0]<=t&&e[1]>=t}const K=["refKey"],A=["children"];class T extends y.default.Component{constructor(){var e,t;super(...arguments),e=this,this.state={offset:0},this.rootNode=y.default.createRef(),this.handleArrowKeys=(t={left:()=>this.getKeyOffset(-1),right:()=>this.getKeyOffset(1),up:()=>this.getKeyOffset(-7),down:()=>this.getKeyOffset(7)},e=>{const{keyCode:n}=e,r={37:t.left,39:t.right,38:t.up,40:t.down}[n];r&&r(e)}),this.getRootProps=function(t){let n=void 0===t?{}:t,{refKey:r="ref"}=n,s=I(n,K);return S({[r]:e.rootNode,onKeyDown:e.handleArrowKeys},s)},this._handleOffsetChanged=e=>{this.setState({offset:e})}}getKeyOffset(e){if(!this.rootNode.current)return;const t=document.activeElement,n=Array.from(this.rootNode.current.querySelectorAll("button:not(:disabled)"));n.some(((r,s)=>{const l=s+e;return r===t&&(l<=n.length-1&&l>=0?(n[l].focus(),!0):(n[0].focus(),!0))}))}componentDidUpdate(e){this.props.date!==e.date&&this._handleOffsetChanged(0)}render(){const t=this.props,{children:n}=t,r=I(t,A);return e.jsx(w.default,S({},r,{offset:this.state.offset,onOffsetChanged:this._handleOffsetChanged,render:e=>n(S({},e,{getRootProps:this.getRootProps}))}))}}class Y extends y.default.Component{constructor(){super(...arguments),this._handleOnDateSelected=(e,t)=>{let{selectable:n,date:r}=e;const{clearOnSameDateClick:s,selected:l,onChange:o}=this.props;if(!n)return;let a=r;l&&l.getTime()===r.getTime()&&s&&(a=null),o&&o(t,a)}}render(){return e.jsx(T,S({},this.props,{onDateSelected:this._handleOnDateSelected}))}}const L=["onMouseEnter","onFocus"],_=["children"],z=["getRootProps","getDateProps"];class H extends y.default.Component{constructor(){super(...arguments),this.state={hoveredDate:null},this.setHoveredDate=e=>{this.setState((t=>t.hoveredDate===e?null:{hoveredDate:e}))},this.onMouseLeave=()=>{this.setHoveredDate(null)},this._handleOnDateSelected=(e,t)=>{let{selectable:n,date:r}=e;const{selected:s,onChange:l}=this.props;if(!n)return;const o=r.getTime();let a=[...s];s.length?1===s.length?s[0].getTime()<o?a.push(r):a.unshift(r):2===a.length&&(a=[r]):a.push(r),l&&l(t,a),2===a.length&&this.setHoveredDate(null)},this.getEnhancedDateProps=(e,t,n)=>{let{onMouseEnter:r,onFocus:s}=n,l=I(n,L);const{hoveredDate:o}=this.state,{date:a}=l.dateObj;return e(S({},l,{inRange:N(t,a),start:t[0]&&j.default(t[0],a),end:t[1]&&j.default(t[1],a),hovered:o&&j.default(o,a),onMouseEnter:B(r,(()=>{this.onHoverFocusDate(a)})),onFocus:B(s,(()=>{this.onHoverFocusDate(a)}))}))},this.getEnhancedRootProps=(e,t)=>e(S({},t,{onMouseLeave:this.onMouseLeave}))}onHoverFocusDate(e){1===this.props.selected.length&&this.setHoveredDate(e)}render(){const t=this.props,{children:n}=t,r=I(t,_),{hoveredDate:s}=this.state,{selected:l}=this.props,o=2!==l.length&&l.length&&s?[l[0],s].sort(O.default):l;return e.jsx(T,S({},r,{onDateSelected:this._handleOnDateSelected,children:e=>{let{getRootProps:t,getDateProps:r}=e,s=I(e,z);return n(S({},s,{getRootProps:this.getEnhancedRootProps.bind(this,t),getDateProps:this.getEnhancedDateProps.bind(this,r,o)}))}}))}}H.defaultProps={selected:[]};const U=["icon"],W=t=>{let{icon:n}=t,r=I(t,U);return e.jsx(f.Button,S({basic:!0,compact:!0,icon:n,type:"button"},r))};function G(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}G(".clndr-cell{background-color:#fff;border:none;color:inherit;cursor:pointer;font-family:inherit;height:30px;padding:5px 0;transition:all .2s}.clndr-cell.inverted{background-color:#4f4f4f}.clndr-cell.inverted:hover{background-color:#757575;color:inherit}.clndr-cell:hover{background-color:#cacbcd;color:inherit}.clndr-cell-today{background-color:#e0e1e2}.clndr-cell-inrange{background-color:#cacbcd;color:inherit}.clndr-cell-inrange.inverted{background-color:#757575;color:inherit}.clndr-cell-disabled{cursor:default;opacity:.45}.clndr-cell-disabled:hover{background-color:#fff}.clndr-cell-disabled.inverted:hover{background-color:#4f4f4f;color:inherit}.clndr-cell-selected{background-color:#4f4f4f;color:#f2f2f2}.clndr-cell-selected.inverted{background-color:#fff;color:#000}.clndr-cell-other-month{color:#d9d9d9}.clndr-cell-other-month.inverted{color:#a6a6a6}");const J=["children","end","hovered","inRange","inverted","nextMonth","prevMonth","selectable","selected","start","today"],Q=t=>{let{children:n,inRange:r,inverted:s,nextMonth:l,prevMonth:o,selectable:a,selected:i,today:d}=t,c=I(t,J);const u=R.default("clndr-cell",{inverted:s,"clndr-cell-today":d,"clndr-cell-disabled":!a,"clndr-cell-other-month":l||o,"clndr-cell-inrange":r,"clndr-cell-selected":i});return n?e.jsx("button",S({className:u,disabled:!a,type:"button"},c,{children:n})):e.jsx("span",S({className:u,tabIndex:n?0:-1},c,{children:n}))};Q.defaultProps={end:!1,hovered:!1,inRange:!1,nextMonth:!1,prevMonth:!1,start:!1};const X=["aria-label","children","end","hovered","inRange","nextMonth","prevMonth","selectable","selected","start","today"],Z={marginTop:10},$=t=>{let{"aria-label":n,children:r}=t,s=I(t,X);return e.jsx(f.Button,S({"aria-label":n+", "+r,className:"clndr-button-today",compact:!0,"data-testid":"datepicker-today-button",fluid:!0,style:Z,type:"button"},s,{children:r}))};G(".clndr-calendars-segment{margin-bottom:.25rem!important;margin-top:.25rem!important;text-align:center}.clndr-calendars-segment.clndr-floating{position:absolute!important;z-index:2000}.clndr-calendars-wrapper{grid-gap:1em;display:grid;grid-template-columns:repeat(var(--n,1),1fr)}.clndr-control{align-items:center;display:grid;grid-template-columns:repeat(3,1fr);margin-bottom:10px}.clndr-days{grid-gap:1px;background-color:#0000001a;border:1px solid #0000001a;border-radius:.28571429rem;display:grid;grid-template-columns:repeat(7,minmax(2.2rem,1fr));overflow:hidden;text-align:center}.clndr-left{left:0}.clndr-right{right:0}.clndr-top{bottom:100%}.clndr-bottom{top:100%}.clndr-calendars-segment.clndr-top{box-shadow:0 -1px 2px 0 #22242626!important;margin-bottom:.25rem!important}");const ee=["ref"],te={leftBtn:{textAlign:"start"},rightBtn:{textAlign:"end"}},ne={"top left":"clndr-top clndr-left","top right":"clndr-top clndr-right",left:"clndr-left",right:"clndr-right"},re=t=>{let{calendars:n,filterDate:s,getBackProps:l,getDateProps:o,getForwardProps:a,getRootProps:i,inline:d,inverted:c,maxDate:u,minDate:h,months:p,nextMonth:g,nextYear:m,previousMonth:v,previousYear:b,showToday:x,todayButton:C,weekdays:k,pointing:w}=t;const O=I(i(),ee),j=r.useRef(),P=e=>{j.current=e.target.getAttribute("aria-label")};return r.useEffect((()=>{if(j.current){const e=document.querySelector('[aria-label="'+j.current+'"]');e&&document.activeElement!==e&&e.focus()}})),e.jsx(y.default.Fragment,{children:e.jsxs(f.Segment,S({},O,{inverted:c,className:R.default("clndr-calendars-segment",{"clndr-floating":!d,[ne[w]]:!d}),children:[e.jsx("div",{className:"clndr-calendars-wrapper",style:{"--n":n.length},children:n.map(((t,i)=>e.jsxs("div",{children:[e.jsxs("div",{className:"clndr-control",children:[e.jsx("div",{style:te.leftBtn,children:0===i&&e.jsxs(r.Fragment,{children:[e.jsx(W,S({icon:"angle double left",inverted:c,title:b,type:"button"},l({calendars:n,"aria-label":b,offset:12,onClick:P}))),e.jsx(W,S({icon:"angle left",inverted:c,style:{marginRight:0},title:v,type:"button"},l({calendars:n,"aria-label":v,onClick:P})))]})}),e.jsxs("span",{title:p[t.month]+" "+t.year,children:[p[t.month].slice(0,3)," ",t.year]}),e.jsx("div",{style:te.rightBtn,children:i===n.length-1&&e.jsxs(r.Fragment,{children:[e.jsx(W,S({icon:"angle right",inverted:c,title:g,type:"button"},a({calendars:n,"aria-label":g,onClick:P}))),e.jsx(W,S({icon:"angle double right",inverted:c,style:{marginRight:0},title:m,type:"button"},a({calendars:n,"aria-label":m,offset:12,onClick:P})))]})})]}),e.jsxs("div",{className:"clndr-days",children:[k.map((n=>e.jsx(Q,{inverted:c,"aria-label":n,title:n,children:n.slice(0,2)},t.year+"-"+t.month+"-"+n))),t.weeks.map((n=>n.map(((n,r)=>{const l=t.year+"-"+t.month+"-"+r;if(!n)return e.jsx(Q,{inverted:c},l);const a=n.selectable&&s(n.date),i=function(e){if(e)return D.default(e,"yyyy-MM-dd")}(n.date);return e.jsx(Q,S({},n,o({dateObj:S({},n,{selectable:a}),onClick:P}),{"data-testid":"datepicker-cell-"+i,inverted:c,selectable:a,children:n.date.getDate()}),l)}))))]})]},t.year+"-"+t.month)))}),x?e.jsx($,S({inverted:c},F(h,u),o({dateObj:F(h,u),onClick:P}),{children:C})):null]}))})},se=t=>{let{clearIcon:n,icon:r,isClearIconVisible:s,onClear:l,onClick:o}=t;return s&&n&&y.default.isValidElement(n)?y.default.cloneElement(n,{"data-testid":"datepicker-clear-icon",onClick:l}):s&&n&&!y.default.isValidElement(n)?e.jsx(f.Icon,{"aria-pressed":"false","data-testid":"datepicker-clear-icon",link:!0,name:n,onClick:l}):r&&y.default.isValidElement(r)?y.default.cloneElement(r,{"data-testid":"datepicker-icon",onClick:o}):e.jsx(f.Icon,{"data-testid":"datepicker-icon",name:r})},le=["clearIcon","error","icon","isClearIconVisible","label","onClear","onFocus","required","value","fieldProps","fieldRef","children"],oe={"data-testid":"datepicker-input"},ae={position:"relative"},ie=y.default.forwardRef(((t,n)=>{const{clearIcon:r,error:s,icon:l,isClearIconVisible:o,label:a,onClear:i,onFocus:d,required:c,value:u,fieldProps:h,children:p}=t,g=I(t,le);return e.jsx(y.default.Fragment,{children:e.jsxs(f.Form.Field,S({},h,{style:ae,children:[a?e.jsx("label",{htmlFor:g.id,children:a}):null,e.jsx(f.Input,S({},g,{ref:n,error:s,required:c,icon:e.jsx(se,{clearIcon:r,icon:l,isClearIconVisible:o,onClear:i,onClick:d}),input:oe,onFocus:d,value:u})),p]}))})})),de=["autoComplete","autoFocus","className","clearIcon","disabled","error","icon","iconPosition","id","label","loading","name","onBlur","onChange","onClick","onContextMenu","onDoubleClick","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","placeholder","required","size","tabIndex","transparent","readOnly"],ce=["disabled","error","inline","required","width"];class ue extends y.default.Component{constructor(){super(...arguments),this.el=y.default.createRef(),this.inputRef=y.default.createRef(),this.state=this.initialState,this.Component=this.isRangeInput?H:Y,this.resetState=e=>{const{keepOpenOnClear:t,onChange:n}=this.props,r={isVisible:t,selectedDate:this.isRangeInput?[]:null,selectedDateFormatted:""};t&&this.focusOnInput(),this.setState(r,(()=>{n(e,S({},this.props,{value:null}))}))},this.clearInput=e=>{this.resetState(e)},this.mousedownCb=e=>{const{isVisible:t}=this.state;t&&this.el&&this.el.current&&!this.el.current.contains(e.target)&&this.close()},this.keydownCb=e=>{const{isVisible:t}=this.state;27===e.keyCode&&t&&this.close()},this.close=()=>{window.removeEventListener("keydown",this.keydownCb),window.removeEventListener("mousedown",this.mousedownCb),this.setState({isVisible:!1})},this.focusOnInput=()=>{var e;if(null!=(e=this.inputRef)&&e.current){const{focus:e,inputRef:t}=this.inputRef.current;document.activeElement!==t.current&&e()}},this.showCalendar=e=>{const{onFocus:t}=this.props;t(e),window.addEventListener("mousedown",this.mousedownCb),window.addEventListener("keydown",this.keydownCb),this.focusOnInput(),this.setState({isVisible:!0})},this.handleRangeInput=(e,t)=>{const{displayFormat:n,keepOpenOnSelect:r,onChange:s,formatOptions:l}=this.props;if(!e||!e.length)return void this.resetState(t);const o={selectedDate:e,selectedDateFormatted:q(e,n,l),typedValue:null};this.setState(o,(()=>{s(t,S({},this.props,{value:e})),2===e.length&&this.setState({isVisible:r})}))},this.handleBasicInput=(e,t)=>{const{displayFormat:n,keepOpenOnSelect:r,onChange:s,formatOptions:l}=this.props;if(!e)return void this.resetState(t);const o={isVisible:r,selectedDate:e,selectedDateFormatted:q(e,n,l),typedValue:null};this.setState(o,(()=>{s(t,S({},this.props,{value:e}))}))},this.handleBlur=e=>{const{format:t,onBlur:n,onChange:r}=this.props,{typedValue:s}=this.state;if(e&&n(e),s){if(this.isRangeInput){const n=((e,t)=>{const n=E(t);return e.split(" - ").map((e=>C.default(e,n,new Date))).sort(((e,t)=>e>t?1:-1))})(String(s),t);if(n.every(m.default))return void this.handleRangeInput(n,e)}else{const n=((e,t)=>C.default(e,E(t),new Date))(String(s),t);if(m.default(n))return void this.handleBasicInput(n,e)}this.setState({typedValue:null},(()=>{r(e,S({},this.props,{value:null}))}))}},this.handleChange=(e,t)=>{let{value:n}=t;const{allowOnlyNumbers:r,format:s,onChange:l}=this.props,o=this.isRangeInput?s+" - "+s:s,a=r?function(e){return void 0===e&&(e=""),e.replace(/[^\d]/g,"")}(n):n;a?this.setState({selectedDate:this.isRangeInput?[]:null,selectedDateFormatted:"",typedValue:v.default(o,a)}):this.setState({selectedDate:this.isRangeInput?[]:null,selectedDateFormatted:"",typedValue:null},(()=>{l(e,S({},this.props,{value:null}))}))},this.handleKeyDown=e=>{13===e.keyCode&&this.handleBlur()},this.onDateSelected=(e,t)=>{this.isRangeInput?this.handleRangeInput(t,e):this.handleBasicInput(t,e)}}componentDidUpdate(e){const{locale:t,value:n}=this.props;b.default(n,e.value)||this.onDateSelected(void 0,n),t!==e.locale&&this.setState({locale:this.locale})}get isRangeInput(){return"range"===this.props.type}get initialState(){const{displayFormat:e,value:t,formatOptions:n}=this.props;return{isVisible:!1,locale:this.locale,selectedDate:t||(this.isRangeInput?[]:null),selectedDateFormatted:q(t,e,n),typedValue:null}}get dayzedProps(){return(e=>{const t=S({},this.props);return e.forEach((e=>delete t[e])),t})(de)}get inputProps(){const e=V(de,this.props);return S({},e,{placeholder:void 0!==e.placeholder?e.placeholder:this.props.format})}get fieldProps(){return S({},V(ce,this.props),{className:void 0!==this.props.fieldClassName?this.props.fieldClassName:null})}get date(){const{selectedDate:e}=this.state,{date:t}=this.props;return t||!e?t:this.isRangeInput?e[0]:e}get locale(){const{locale:e}=this.props;let t;try{t=require("./locales/"+e+".json")}catch(n){console.warn('"'+e+'" is not a valid locale'),t=require("./locales/en-US.json")}return t}get weekdays(){const{firstDayOfWeek:e}=this.dayzedProps,{weekdays:t}=this.state.locale;return(r=t).slice(n=e).concat(r.slice(0,n));var n,r}render(){const{isVisible:t,locale:n,selectedDate:r,selectedDateFormatted:s,typedValue:l}=this.state,{clearable:o,pointing:a,filterDate:i,inline:d,inverted:c,readOnly:u,datePickerOnly:h}=this.props,p=e.jsx(this.Component,S({},this.dayzedProps,{monthsToDisplay:this.isRangeInput?2:1,onChange:this.onDateSelected,selected:r,date:this.date,children:t=>e.jsx(re,S({},this.dayzedProps,t,n,{filterDate:i,inverted:c,pointing:a,weekdays:this.weekdays}))}));return d?p:e.jsx(ie,S({},this.inputProps,{isClearIconVisible:Boolean(o&&s),onBlur:this.handleBlur,onChange:this.handleChange,onClear:this.clearInput,onFocus:u?null:this.showCalendar,onKeyDown:this.handleKeyDown,readOnly:u||h,fieldProps:this.fieldProps,fieldRef:this.el,ref:this.inputRef,value:l||s,children:t&&p}))}}ue.defaultProps={allowOnlyNumbers:!1,autoFocus:!1,clearIcon:"close",clearOnSameDateClick:!0,clearable:!0,date:void 0,filterDate:()=>!0,firstDayOfWeek:0,format:"YYYY-MM-DD",displayFormat:"YYYY-MM-DD",icon:"calendar",id:void 0,inline:!1,keepOpenOnClear:!1,keepOpenOnSelect:!1,label:void 0,locale:"en-US",name:void 0,onBlur:()=>{},onChange:()=>{},onFocus:()=>{},placeholder:void 0,pointing:"left",readOnly:!1,datePickerOnly:!1,required:!1,showToday:!0,showOutsideDays:!1,type:"basic",value:null,inverted:!1},exports.default=ue;
//# sourceMappingURL=react-semantic-ui-datepickers.cjs.production.min.js.map
